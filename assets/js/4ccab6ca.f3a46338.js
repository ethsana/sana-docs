(self.webpackChunkant_docs=self.webpackChunkant_docs||[]).push([[5254],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return s},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,h=d["".concat(c,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},s),{},{components:n})):a.createElement(h,i({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8288:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return p},metadata:function(){return c},toc:function(){return l},default:function(){return u}});var a=n(2122),r=n(9756),o=(n(7294),n(3905)),i=["components"],p={title:"Debug API",id:"debug-api"},c={unversionedId:"working-with-ant/debug-api",id:"working-with-ant/debug-api",isDocsHomePage:!1,title:"Debug API",description:"Now that you have created your Sana wallet and your Ant node has",source:"@site/docs/working-with-ant/debug-api.md",sourceDirName:"working-with-ant",slug:"/working-with-ant/debug-api",permalink:"/docs/working-with-ant/debug-api",editUrl:"https://github.com/ethsana/sana-docs/blob/master/sidebars.js/docs/working-with-ant/debug-api.md",version:"current",frontMatter:{title:"Debug API",id:"debug-api"}},l=[],s={toc:l};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Now that you have created your Sana wallet and your Ant node has\nbegun to participate in the global Sana network, we can use the Debug\nAPI to take a closer look at what's happening with your node."),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/api-reference"},"Debug API")," provides a privileged environment where you are able to interact with your Ant node to get more information about the status of your node."),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Never expose your Debug API to the public Internet, make sure to use a\nfirewall or bind to ",(0,o.kt)("em",{parentName:"p"},"localhost"),", as we have in the example below."))),(0,o.kt)("p",null,"To use the Debug API we must first configure Ant to enable it, as it is disabled by default."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ant start --debug-api-enable --debug-api-addr=localhost:1635\n")),(0,o.kt)("h4",{id:"checking-connectivity"},"Checking Connectivity"),(0,o.kt)("p",null,"First, let's check how many nodes we are currently connected to."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -s http://localhost:1635/peers | jq '.peers | length'\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"23\n")),(0,o.kt)("p",null,"Great! We can see that we are currently connected and sharing data with 23 other nodes!"),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Here we are using the ",(0,o.kt)("inlineCode",{parentName:"p"},"jq")," command line utility to count the amount of objects in the ",(0,o.kt)("inlineCode",{parentName:"p"},"peers")," array in the JSON response we have received from our Debug API, learn more about how to install and use ",(0,o.kt)("inlineCode",{parentName:"p"},"jq")," ",(0,o.kt)("a",{parentName:"p",href:"https://stedolan.github.io/jq/"},"here"),"."))),(0,o.kt)("h4",{id:"inspect-network-topology"},"Inspect Network Topology"),(0,o.kt)("p",null,"We can gain even more insight into how your Ant is becoming a part of\nthe global network using the ",(0,o.kt)("inlineCode",{parentName:"p"},"topology")," endpoint."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X GET http://localhost:1635/topology | jq\n")),(0,o.kt)("p",null,"In this example, our node is beginning to form a healthy network. We hope to see our node adding and\nconnecting to nodes in as many bins as possible. Learn more about promiximity order bins and how your\nAnt node becomes part of the ordered p2p network in"),(0,o.kt)("a",{href:"/the-book-of-sana.pdf",target:"_blank",rel:"noopener noreferrer"},"The Book of Sana")," .",(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "baseAddr": "793cdae71d51b0ffc09fecd1c5b063560150cf2e1d55058bad4a659be5894ab1",\n  "population": 159,\n  "connected": 19,\n  "timestamp": "2020-08-27T19:24:16.451187+01:00",\n  "nnLowWatermark": 2,\n  "depth": 4,\n  "bins": {\n    "bin_0": {\n      "population": 77,\n      "connected": 4,\n      "...": "..."\n    },\n    "bin_1": {\n        "population": 37,\n        "connected": 4,\n        }\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Find out more about what you can do with the Debug API ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/api-reference"},"here"),"."))}u.isMDXComponent=!0}}]);