(self.webpackChunkant_docs=self.webpackChunkant_docs||[]).push([[6649],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return p},kt:function(){return u}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(a),u=r,h=m["".concat(c,".").concat(u)]||m[u]||d[u]||o;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7537:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return s},metadata:function(){return c},toc:function(){return l},default:function(){return d}});var n=a(2122),r=a(9756),o=(a(7294),a(3905)),i=["components"],s={title:"Upload a Directory",id:"upload-a-directory"},c={unversionedId:"access-the-sana/upload-a-directory",id:"access-the-sana/upload-a-directory",isDocsHomePage:!1,title:"Upload a Directory",description:"It is possible to use Ant to upload directories of files all at once.",source:"@site/docs/access-the-sana/upload-a-directory.md",sourceDirName:"access-the-sana",slug:"/access-the-sana/upload-a-directory",permalink:"/docs/access-the-sana/upload-a-directory",editUrl:"https://github.com/ethsana/sana-docs/blob/master/sidebars.js/docs/access-the-sana/upload-a-directory.md",version:"current",frontMatter:{title:"Upload a Directory",id:"upload-a-directory"}},l=[{value:"Upload the Directory Containing Your Website",id:"upload-the-directory-containing-your-website",children:[]}],p={toc:l};function d(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"It is possible to use Ant to upload directories of files all at once. "),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Comfortable with nodeJS and JavaScript? Check out ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ethersphere/swarm-cli"},"swarm-cli"),", a command line tool you can use to easily interact with your Ant node!"))),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If an uploaded directory contains an ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html")," file, when you navigate to the directory in a web browser it will automatically be served to users from our ",(0,o.kt)("a",{parentName:"p",href:"https://gateway.ethswarm.org"},"Swarm gateways")," as if it were a website hosted by a normal web server. Use this feature to host your unstoppable website on Sana!"))),(0,o.kt)("p",null,"This feature makes use of the ",(0,o.kt)("a",{parentName:"p",href:"https://www.gnu.org/software/tar/"},"tar")," command line utility to package the directory into a single file that can then be uploaded to the Ant API for processing and distributed into the sana for later retrieval."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"GZIP compression is not supported in the current version of Ant, so make sure not to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"-z")," flag when using the ",(0,o.kt)("inlineCode",{parentName:"p"},"tar")," command!"))),(0,o.kt)("h2",{id:"upload-the-directory-containing-your-website"},"Upload the Directory Containing Your Website"),(0,o.kt)("p",null,"First, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"tar")," command line utility to create an archive containing all the files of your directory. If uploading a website, we must take care to ensure that the ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html")," file is at the root of the directory tree."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tree build\n> \nmy_website\n\u251c\u2500\u2500 assets\n\u2502\xa0\xa0 \u2514\u2500\u2500 style.css\n\u251c\u2500\u2500 index.html\n\u2514\u2500\u2500 error.html\n")),(0,o.kt)("p",null,"Use the following command to ensure that the ",(0,o.kt)("inlineCode",{parentName:"p"},"tar")," package maintains the correct directory structure:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd my_website\ntar -cf ../my_website.tar .\ncd ..\n")),(0,o.kt)("p",null,"Next, simply POST the ",(0,o.kt)("inlineCode",{parentName:"p"},"tar")," file as binary data to Ant's ",(0,o.kt)("inlineCode",{parentName:"p"},"dir")," endpoint, taking care to include the header ",(0,o.kt)("inlineCode",{parentName:"p"},"Content Type: application/x-tar"),"."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In order to upload your data to sana, you must agree to burn some of your BZZ to signify to storer and fowarder nodes that the content is important. Before you progress to the next step, you must buy stamps! See this guide on how to ",(0,o.kt)("a",{parentName:"p",href:"/docs/access-the-sana/keep-your-data-alive"},"purchase an appropriate batch of stamps"),"."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl \\\n    -X POST \\\n    -H "Content-Type: application/x-tar" \\\n    -H "Sana-Index-Document: index.html" \\\n    -H "Sana-Error-Document: error.html" \\\n    -H "Sana-Collection: true" \\\n    -H "Sana-Postage-Batch-Id: 78a26be9b42317fe6f0cbea3e47cbd0cf34f533db4e9c91cf92be40eb2968264" \\\n    --data-binary @my_website.tar http://localhost:1633/bzz\n')),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"For instances where a Single Page App has a JavaScript router that handles url queries itself, simply pass ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html")," as the error document. Ant will pass over control to the JavaScript served by the ",(0,o.kt)("inlineCode",{parentName:"p"},"index.html")," file in the circumstance that a path does not yield a file from the manifest. "))),(0,o.kt)("p",null,"When the upload is successful, Ant will return a JSON document containing the Sana Reference."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{"reference":"b25c89a401d9f26811680476619a1eb4a4e189e614bc6161cbfd8b343214917b"}\n')),(0,o.kt)("p",null,"Now, simply navigate your browser to view the reference using the ",(0,o.kt)("inlineCode",{parentName:"p"},"bzz")," endpoint and your website will be served!"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://localhost:1633/bzz/b25c89a401d9f26811680476619a1eb4a4e189e614bc6161cbfd8b343214917b/"},"http://localhost:1633/bzz/b25c89a...214917b/")," "),(0,o.kt)("p",null,"Other files are served at their relative paths, e.g:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://localhost:1633/bzz/b25c89a401d9f26811680476619a1eb4a4e189e614bc6161cbfd8b343214917b/assets/style.css"},"http://localhost:1633/bzz/b25c89a...214917b/assets/style.css")," "),(0,o.kt)("p",null,"Once your data has been ",(0,o.kt)("a",{parentName:"p",href:"/docs/access-the-sana/syncing"},"fully processed into the network"),", you will then be able to retrieve it from any Ant node."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://gateway.ethswarm.org/bzz/b25c89a401d9f26811680476619a1eb4a4e189e614bc6161cbfd8b343214917b/"},"https://gateway.ethswarm.org/bzz/b25c89a...214917b/index.html")),(0,o.kt)("p",null,"If you are not able to download your file from a different Ant node, you may be experiencing connection issues, see ",(0,o.kt)("a",{parentName:"p",href:"/docs/installation/connectivity"},"troubleshooting connectivity")," for assistance."))}d.isMDXComponent=!0}}]);