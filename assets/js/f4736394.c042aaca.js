(self.webpackChunkant_docs=self.webpackChunkant_docs||[]).push([[4227],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=s(n),m=r,h=c["".concat(u,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4792:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return u},toc:function(){return s},default:function(){return d}});var a=n(2122),r=n(9756),o=(n(7294),n(3905)),i=["components"],l={title:"Upgrading Ant",id:"upgrade"},u={unversionedId:"working-with-ant/upgrade",id:"working-with-ant/upgrade",isDocsHomePage:!1,title:"Upgrading Ant",description:"Keep a close eye on the",source:"@site/docs/working-with-ant/upgrade.md",sourceDirName:"working-with-ant",slug:"/working-with-ant/upgrade",permalink:"/docs/working-with-ant/upgrade",editUrl:"https://github.com/ethsana/sana-docs/blob/master/sidebars.js/docs/working-with-ant/upgrade.md",version:"current",frontMatter:{title:"Upgrading Ant",id:"upgrade"}},s=[{value:"Upgrading to mainnet",id:"upgrading-to-mainnet",children:[]},{value:"Upgrading from a testnet v0.6.x series to a testnet v1.0 series",id:"upgrading-from-a-testnet-v06x-series-to-a-testnet-v10-series",children:[]},{value:"Upgrade Procedure",id:"upgrade-procedure",children:[{value:"Ubuntu / Debian / Raspbian",id:"ubuntu--debian--raspbian",children:[]}]}],p={toc:s};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Keep a close eye on the\n",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/c72mpR7Erf"},"Discord server")," for information on the\nlatest software updates for Ant. It's very important to keep Ant up to\ndate to benefit from security updates and ensure you are able to\nproperly interact with the Sana."),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Ant sure to ",(0,o.kt)("a",{parentName:"p",href:"/docs/working-with-ant/backups"},"backup")," your clef key material and ",(0,o.kt)("a",{parentName:"p",href:"/docs/working-with-ant/cashing-out"},"cashout your cheques")," to make sure your BZZs are safe before applying updates."))),(0,o.kt)("h3",{id:"upgrading-to-mainnet"},"Upgrading to mainnet"),(0,o.kt)("p",null,"Mainnet is a totally new network - you can not upgrade a testnet node to a mainnet node. Please create a new Ant and join us in the sana for real! \ud83d\udc1d"),(0,o.kt)("h3",{id:"upgrading-from-a-testnet-v06x-series-to-a-testnet-v10-series"},"Upgrading from a testnet v0.6.x series to a testnet v1.0 series"),(0,o.kt)("p",null,"Ant v1.0 contains a few breaking changes which means that database\nmigration must take place. We also introduced ",(0,o.kt)("a",{parentName:"p",href:"/docs/access-the-sana/keep-your-data-alive"},"postage\nstamps")," which must be\nattached to chunks of data so that it will be retained in the Sana\nnetwork."),(0,o.kt)("p",null,"As part of these changes, if you have any ",(0,o.kt)("strong",{parentName:"p"},"locally pinned content"),",\nthis must be manually migrated to the new data structure expected by\nthe network of 1.0 clients. See below for information on how to\nproceed."),(0,o.kt)("p",null,"If you ",(0,o.kt)("em",{parentName:"p"},"do not")," have any locally pinned content, your migration will\nbe automatic and your update will proceed as normal."),(0,o.kt)("p",null,"To check if a 0.6 node has pinned content, query the ",(0,o.kt)("inlineCode",{parentName:"p"},"pin")," api endpoint as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -s localhost:1633/pin/chunks | jq ".chunks | length"\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"100\n")),(0,o.kt)("p",null,"If any non-zero values are returned, ",(0,o.kt)("strong",{parentName:"p"},"you must")," complete the manual\nmigration procedure, automatic migration will be prevented and ",(0,o.kt)("em",{parentName:"p"},"you\nmust")," follow the ",(0,o.kt)("a",{parentName:"p",href:"#manual-migration-procedure"},"Manual Migration\nProcedure"),"."),(0,o.kt)("h4",{id:"automatic-migration-procedure"},"Automatic Migration Procedure"),(0,o.kt)("p",null,"To update ",(0,o.kt)("strong",{parentName:"p"},"without pinned content:")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Optionally, ",(0,o.kt)("a",{parentName:"li",href:"/docs/working-with-ant/cashing-out"},"cashout your node's cheques")," to make sure your BZZs are safe. If you have cashed out recently, you can skip this step."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"/docs/working-with-ant/backups"},"Backup your Ant")," data, especially your keys folder!"),(0,o.kt)("li",{parentName:"ol"},"Upgrade your node, as you normally would (see below)."),(0,o.kt)("li",{parentName:"ol"},"Adjust your networkID in the configuration from ",(0,o.kt)("inlineCode",{parentName:"li"},"1")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"10")," (the new networkID for the testnet). Check out the ",(0,o.kt)("a",{parentName:"li",href:"/docs/working-with-ant/configuration"},"configuration")," guide for more info on how to update your configuration."),(0,o.kt)("li",{parentName:"ol"},"Restart your node.")),(0,o.kt)("p",null,"Your Ant should start up as normal, and begin to connect to other Ants that are running Ant 1.0 or later."),(0,o.kt)("h4",{id:"manual-migration-procedure"},"Manual Migration Procedure"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"/docs/working-with-ant/cashing-out"},"Cashout your node")," to make sure your BZZs are safe. If you have cashed out recently, you can skip this step."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"/docs/working-with-ant/backups"},"Backup your Ant")," data, especially your keys folder!"),(0,o.kt)("li",{parentName:"ol"},"If you have pinned data, Download all your pinned data. Please use these to download all your data ready for re-upload with ",(0,o.kt)("a",{parentName:"li",href:"/docs/access-the-sana/keep-your-data-alive"},"postage stamps"),"."),(0,o.kt)("li",{parentName:"ol"},"Carefully, delete your ",(0,o.kt)("inlineCode",{parentName:"li"},"localstorage")," folder ",(0,o.kt)("strong",{parentName:"li"},"only"),". ",(0,o.kt)("em",{parentName:"li"},"DO NOT DELETE")," your ",(0,o.kt)("inlineCode",{parentName:"li"},"keys")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"statestore")," folder. Your ",(0,o.kt)("inlineCode",{parentName:"li"},"localstorage")," folder can be located by consulting your Ant's ",(0,o.kt)("inlineCode",{parentName:"li"},"data-dir")," configuration parameter. If you are using Docker, please delete just the contents of the folder."),(0,o.kt)("li",{parentName:"ol"},"Upgrade your node, as you normally would (see below)."),(0,o.kt)("li",{parentName:"ol"},"Adjust your networkID in the configuration from ",(0,o.kt)("inlineCode",{parentName:"li"},"1")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"10")," (the new networkID for the testnet). Check out the ",(0,o.kt)("a",{parentName:"li",href:"/docs/working-with-ant/configuration"},"configuration")," guide for more info on how to update your configuration."),(0,o.kt)("li",{parentName:"ol"},"Restart your node.")),(0,o.kt)("p",null,"Your Ant should start up as normal, and begin to connect to other Ants that are running Ant 1.0.0 or later."),(0,o.kt)("h2",{id:"upgrade-procedure"},"Upgrade Procedure"),(0,o.kt)("h3",{id:"ubuntu--debian--raspbian"},"Ubuntu / Debian / Raspbian"),(0,o.kt)("p",null,"To upgrade Ant, simply stop the Ant service."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl stop ant\n")),(0,o.kt)("p",null,"Now follow the ",(0,o.kt)("a",{parentName:"p",href:"/docs/installation/install"},"installation instructions")," to download the new package and install the new version, as you would during a new installation."),(0,o.kt)("p",null,"You will be greeted by the following prompt:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Configuration file '/etc/ant/ant.yaml'\n ==> Modified (by you or by a script) since installation.\n ==> Package distributor has shipped an updated version.\n   What would you like to do about it ?  Your options are:\n    Y or I  : install the package maintainer's version\n    N or O  : keep your currently-installed version\n      D     : show the differences between the versions\n      Z     : start a shell to examine the situation\n The default action is to keep your current version.\n*** ant.yaml (Y/I/N/O/D/Z) [default=N] ?\n")),(0,o.kt)("p",null,"Select ",(0,o.kt)("inlineCode",{parentName:"p"},"N")," to keep your current data and keys."),(0,o.kt)("p",null,"You may now start your node again."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl start ant\n")),(0,o.kt)("h4",{id:"manual-installations"},"Manual Installations"),(0,o.kt)("p",null,"To upgrade your manual installation, simply stop Ant, replace the Ant binary and restart."),(0,o.kt)("h4",{id:"docker"},"Docker"),(0,o.kt)("p",null,"To upgrade your docker installation, simply increment the version number in your configurations and restart."))}d.isMDXComponent=!0}}]);