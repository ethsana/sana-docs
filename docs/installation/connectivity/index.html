<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SANA Ant Client Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SANA Ant Client Blog Atom Feed"><title data-react-helmet="true">Connectivity | SANA Ant Client</title><meta data-react-helmet="true" property="og:url" content="https://docs.ethsana.org/docs/installation/connectivity"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Connectivity | SANA Ant Client"><meta data-react-helmet="true" name="description" content="To fully connect to the sana, your Sana node needs to be able to both"><meta data-react-helmet="true" property="og:description" content="To fully connect to the sana, your Sana node needs to be able to both"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.ethsana.org/docs/installation/connectivity"><link data-react-helmet="true" rel="alternate" href="https://docs.ethsana.org/docs/installation/connectivity" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.ethsana.org/docs/installation/connectivity" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d4685bc5.css">
<link rel="preload" href="/assets/js/runtime~main.7c5259cb.js" as="script">
<link rel="preload" href="/assets/js/main.049381c7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/sana-logo.svg" alt="Sana Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/sana-logo.svg" alt="Sana Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Sana Ant</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Get Started</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ethsana/sana" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/sana-logo.svg" alt="Sana Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/sana-logo.svg" alt="Sana Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Sana Ant</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Get Started</a></li><li class="menu__list-item"><a href="https://github.com/ethsana/sana" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Connectivity</h1></header><div class="markdown"><p>To fully connect to the sana, your Sana node needs to be able to both
send and receive messages from the outside world. Normally, your
router will not allow other IP&#x27;s on the Internet to connect, unless
you have initiated the connection. Ants welcome newcomers in the
sana, as long as they play by the rules! If a node misbehaves, we
will simply add it to a list of blocked nodes and refuse future
connections from them.</p><p>Here at Sana, every Sana counts! To make sure all Sanas can join the
Sana, below you will find a detailed guide to navigating your way
through your network and making out into the wild so you can buzz
around fellow antss and maximise your chances of earning those SANAs. If
you still have problems, please join us in our <a href="https://discord.gg/wdghaQsGq5" target="_blank" rel="noopener noreferrer">Discord
server</a> and we&#x27;ll help you find the
way! </p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>To ensure your Ant has the best chance of particpating in the sana,
you must ensure your Ant is able to handle <strong>both incoming and
outgoing connections from the global Internet to its p2p port
(<code>1634</code> by default)</strong>. See below for a detailed guide on how to make sure
this is the case, or for the 1337: check your
<code>http://localhost:1635/addresses</code> to see which public ip and port
libp2p is advertising and verify its connectivity to the rest of the
Internet! You may need to alter your Ant nodes <code>nat-addr</code>
configuration. ðŸ¤“</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="networking-basics"></a>Networking Basics<a class="hash-link" href="#networking-basics" title="Direct link to heading">#</a></h3><p>In a network, each computer is assigned an IP address. Each IP address
is then subdivided into thousands of <em>sockets</em> or <em>ports</em>, each of
which has an incoming and outgoing component.</p><p>In a completely trusted network of computers, any connections to or
from any of these ports are allowed. However, to protect ourselves
from nefarious actors when we join the wider Internet, it is sometimes
important to filter this traffic so that some of these ports are off
limits to the public.</p><p>In order to allow messages to our p2p port from other Ant nodes that
we have previously not connected, we must ensure that our network is
set up to receive incoming connections (on port <code>1634</code> by default).</p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>There are also some ports which you should never expose to the outside
Internet. Make sure that your <code>api-addr</code> (default <code>1633</code>) is only ever
exposed in <code>Gateway Mode</code> and your <code>debug-api-addr</code> (default <code>1635</code>)
is never exposed to the Internet. It is good practice to employ one or
more firewalls that block traffic on every port except for those you
are expecting to be open.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="your-ip-address"></a>Your IP Address<a class="hash-link" href="#your-ip-address" title="Direct link to heading">#</a></h2><p>When you connect to the Internet, you are assigned a unique number
called an IP Address. IP stands for <strong>Internet Protocol</strong>. The most
prevalent IP version used is <em>still</em> the archaic
<a href="https://en.wikipedia.org/wiki/IPv4" target="_blank" rel="noopener noreferrer">IPv4</a> which was invented way back
in 1981. IPv6 is available but not well used. Due to the mitigation of
the deficiencies inherent in the IPv4 standard, we may encounter some
complications.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="datacenters-and-computers-connected-directly-to-the-internet"></a>Datacenters and Computers Connected Directly to the Internet<a class="hash-link" href="#datacenters-and-computers-connected-directly-to-the-internet" title="Direct link to heading">#</a></h3><p>If you are renting space in a datacenter, the chances are that your computer will be connected directly to the real Internet. This means that the IP of your networking interface will be directly set to be the same as your public IP.</p><p>You can investigate this by running:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ifconfig</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>or </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> address</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Your output should contain something like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        inet 178.128.196.191  netmask 255.255.240.0  broadcast 178.128.207.255</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here we can see our computer&#x27;s <strong>public IP address</strong>
<code>178.128.196.191</code>. This is the address that is used by other computers
we connect to over the Internet. We can verify this using a third
party service such as <em>icanhazip</em>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> icanhazip.com</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">178.128.196.191</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>With Ant running, try to connect to your Ant&#x27;s p2p port using the public IP adddress from another computer:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nc</span><span class="token plain"> -zv </span><span class="token number" style="color:rgb(247, 140, 108)">178.128</span><span class="token plain">.196.191 </span><span class="token number" style="color:rgb(247, 140, 108)">1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you have success, congratulations!</p><p>If this still doesn&#x27;t work for you, see the last part of <em>Manual: Configure Your Router and Ant</em> section below, as you may need to configure your <code>nat-addr</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="home-commercial-and-business-networks-and-other-networks-behind-nat"></a>Home, Commercial and Business Networks and Other Networks Behind NAT<a class="hash-link" href="#home-commercial-and-business-networks-and-other-networks-behind-nat" title="Direct link to heading">#</a></h3><p>To address the
<a href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion" target="_blank" rel="noopener noreferrer">scarcity of IP numbers</a>,
Network Address Translation (NAT) was implemented. This approach
creates a smaller, private network which many devices connect to in
order to share a public IP address. Traffic destined for the Internet
at large is then mediated by another specialised computer. In the
cases of the a home network, this computer is the familiar home
router, normally also used to provide a WiFi network.</p><p>If we run the above commands to find the computer&#x27;s IP in this scenario, we will see a different output.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> address</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    inet 192.168.0.10 netmask 0xffffff00 broadcast 192.168.0.255</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here we can see that, instead of the public IP address, we can see
that our computer&#x27;s IP address is <code>192.168.0.10</code>. This is part of the
IP address space that the Internet Engineering Task Force has
designated for
<a href="https://en.wikipedia.org/wiki/Private_network" target="_blank" rel="noopener noreferrer">private networks</a>.</p><p>As this IP won&#x27;t work on the global Internet, our router remembers
that our computer has been assigned this IP. It then uses <em>Network
Address Translation</em> (NAT) to modify all requests from our computer to
another computer somewhere in the Internet. As the requests pass
through the router it changes our local IP to the public IP of the
router, and vice versa when the responses are sent back, from the
public IP to the local one.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="navigating-through-the-nat"></a>Navigating Through the NAT<a class="hash-link" href="#navigating-through-the-nat" title="Direct link to heading">#</a></h4><p>The presence of NAT presents two problems for p2p networking. </p><p>The first is that it can be difficult for programs running on our computer to know our real public IP as it is not explicitly known by our computer&#x27;s networking interface, which is configured with a private network IP. This is a relatively easy problem to solve as we can simply discover our public IP and then specify it in Ant&#x27;s configuration, or indeed determine it using other means.</p><p>The second issue is that our router has only 65535 ports to expose to
the public network, however, <em>each device on your private network</em> is
capable of exposing 65535 <em>each</em>. To the global Internet, it appears
that there is only one set of ports to connect to, whereas, in actual
fact, there is a full set of ports for each of the devices which are
connected to the private network. To solve this second problem,
routers commonly employ an approach known as <em>port forwarding</em>.</p><p>Ant&#x27;s solution to these problems come in two flavours, automatic and manual.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="automatic-universal-plug-and-play-upnp"></a>Automatic: Universal Plug and Play (UPnP)<a class="hash-link" href="#automatic-universal-plug-and-play-upnp" title="Direct link to heading">#</a></h5><p>UPnP is a protocol designed to simplify the administration of NAT and
port forwarding for the end user by providing an API from which
software running within the network can use to ask the router for the
public IP and to request for ports to be forwarded to the private IP
of the computer running the software.</p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>UPnP is a security risk!</h5></div><div class="admonition-content"><p>UPnP is a security risk as it allows any host or process inside
(sometimes also outside) your network to open arbitrary ports which
may be used to transfer malicious traffic, for example a
<a href="https://en.wikipedia.org/wiki/Remote_desktop_software#RAT" target="_blank" rel="noopener noreferrer">RAT</a>. UPnP
can also be used to determine your IP, and in the case of using ToR or
a VPN, your <em>real</em> public IP. We urge you to disable UPnP on your
router and use manual port forwarding as described below.</p></div></div><p>Ant will use UPnP to determine your public IP, which is required for various internal processes.</p><p>In addition to this, a request will be sent to your router to ask it
to forward a random one of its ports, which are exposed directly to
the Internet, to the Ant p2p port (default <code>1634</code>) which your computer
is exposing only to the private network. Doing this creates a tunnel
through which other Ant&#x27;s may connect to your computer safely.</p><p>If you start your Ant node in a private network with UPnP available, the output of the addresses endpoint of your Debug API will look something like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/127.0.0.1/tcp/1634/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/192.168.0.10/tcp/1634/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip6/::1/tcp/1634/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/86.98.94.9/tcp/20529/p2p/16Uiu2HAm5zcoBFWmqjDTwGy9RXepBFF8idy6Pr312obMwwxdJSUP&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Note that the port in the external
<a href="https://docs.libp2p.io/concepts/addressing/" target="_blank" rel="noopener noreferrer">multiaddress</a> is the
router&#x27;s randomly selected <code>20529</code> which is forwarded by the router to
<code>192.168.0.10:1634</code>. These addresses in this multiaddress are also
known as the underlay addresses.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="manual-configure-your-router-and-ant"></a>Manual: Configure Your Router and Ant<a class="hash-link" href="#manual-configure-your-router-and-ant" title="Direct link to heading">#</a></h5><p>Inspecting the underlay addresses in the output of the addresses
endpoint of our Debug API, we can see addresses only for <em>localhost</em>
<code>127.0.0.1</code> and our <em>private network IP</em> <code>192.168.0.10</code>. Ant must be
having trouble navigating our NAT.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/127.0.0.1/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/192.168.0.10/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip6/::1/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To help fix the first problem, let&#x27;s determine our public IP address.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> icanhazip.com</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">86.98.94.9</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now we can simply supply this IP in our Ant configuration on startup.</p><p>Solving our second problem is a little more difficult as we will need to interact with our router&#x27;s firmware, which is a little cranky.</p><p>Each router is different, but the concept is usually the same. Log in to your router by navigating your browser to your router&#x27;s configuration user interface, usually at <a href="http://192.168.0.1" target="_blank" rel="noopener noreferrer">http://192.168.0.1</a>. You will need to log in with a password. Sadly, passwords are often left to be the defaults, which can be found readily on the Internet.</p><p>Once logged in, find the interface to set up port forwarding. The <a href="https://portforward.com/router.htm" target="_blank" rel="noopener noreferrer">Port Forward</a> website provides some good information, or you may refer to your router manual or provider.</p><p>Here, we will then set up a rule that forwards port <code>1634</code> of our
private IP address <code>192.168.0.10</code> to the same port <code>1634</code> of our
public IP.</p><p>Now, when requests arrive at our public address <code>86.98.94.9:1634</code> they
are modified by our router and forwarded to our private IP and port
<code>192.168.0.10:1634</code>.</p><p>Sometimes this can be a little tricky, so let&#x27;s verify we are able to make a TCP connection using <a href="https://nmap.org/ncat/" target="_blank" rel="noopener noreferrer">netcat</a>.</p><p>First, with Ant <strong>not</strong> running, let&#x27;s set up a simple TCP listener using Netcat on the same machine we would like to run Ant on.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nc</span><span class="token plain"> -l </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0 </span><span class="token number" style="color:rgb(247, 140, 108)">1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nc</span><span class="token plain"> -zv </span><span class="token number" style="color:rgb(247, 140, 108)">86.98</span><span class="token plain">.94.9 </span><span class="token number" style="color:rgb(247, 140, 108)">1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connection to 86.98.94.9 port 1834 [tcp/*] succeeded!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Success! âœ¨</p><p>If this didn&#x27;t work for you, check out our Debugging Connectivity guide below.</p><p>If it did, let&#x27;s start our Ant node with the <code>--nat-addr</code> configured.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ant start --nat-addr </span><span class="token number" style="color:rgb(247, 140, 108)">86.98</span><span class="token plain">.94.9:1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Checking our addresses endpoint again, we can now see that Ant has been able to successfully assign a public address! Congratulations, your Ant is now connected to the outside world!</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/127.0.0.1/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/192.168.0.10/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip6/::1/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/ip4/86.98.94.9/tcp/1634/p2p/16Uiu2HAm8Hs91MzWuXfUyKrYaj3h8K8gzvRqzSK5gP9TNCwypkJB&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you are regularly connecting and disconnecting to a network, you
may also want to use your router&#x27;s firmware to configure the router to
reserve and only assign the same local network IP from its DHCP pool
to your computer&#x27;s MAC address. This will ensure that your Ant
seamlessly connects when you rejoin the network!</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="debugging-connectivity"></a>Debugging Connectivity<a class="hash-link" href="#debugging-connectivity" title="Direct link to heading">#</a></h3><p>The above guide navigates your NAT, but there are still a few hurdles to overcome. To make sure there is a clear path from your computer to the outside world, let&#x27;s follow our Ant&#x27;s journey from the inside out.</p><p>Let&#x27;s set up a netcat listener on all interfaces on the computer we&#x27;d
like to run Ant on as we have above.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nc</span><span class="token plain"> -l </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0 </span><span class="token number" style="color:rgb(247, 140, 108)">1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now, let&#x27;s verify we&#x27;re able to connect to netcat by checking the connection from our local machine.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nc</span><span class="token plain"> -zv </span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1 </span><span class="token number" style="color:rgb(247, 140, 108)">1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connection to 127.0.0.1 port 1634 [tcp/*] succeeded!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This should be a no brainer, the connection between localhost in not normally mediated. </p><p>If there is a problem here, the problem is with some other software running on your operating system or your operating system itself. Try a different port, such as <code>1734</code> and turning off any unneccesary software. If this doesn&#x27;t work, you may need to try a different operating system environment. Please get in touch and we&#x27;ll try to help!</p><p>If we were successful, let&#x27;s move on to the next stage.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you are not able to get access to some firewall settings, or
otherwise debug incoming connectivity, don&#x27;t worry! All is not
lost. Ant can function just fine with just outgoing
connections. However, if you can, it is worth the effort to allow
incoming connections, as the whole sana will benefit from the
increased connectivity.</p></div></div><p>Let&#x27;s find out what our IP looks like to the Internet.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> icanhazip.com</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">86.98.94.9</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now try to connect to your port using the global IP.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nc</span><span class="token plain"> -zv </span><span class="token number" style="color:rgb(247, 140, 108)">86.98</span><span class="token plain">.94.9 </span><span class="token number" style="color:rgb(247, 140, 108)">1634</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If this is successful, our Ant node&#x27;s path is clear!</p><p>If not, we can try a few things to make sure there are no barriers stopping us from getting through.</p><ol><li><p>Check your computer&#x27;s firewall.</p><p>Sometimes your computer is configured to prevent connections. If you
are on a private network mediated by NAT, you can check if this is
the problem by trying to connect from another device on your network
using the local IP <code>nc -zv 192.168.0.10 1634</code>.</p><p>Ubuntu uses <a href="https://help.ubuntu.com/community/UFW" target="_blank" rel="noopener noreferrer">UFW</a>, MacOS can
be configured using the <em>Firewall</em> tab in the <em>Security &amp; Privacy</em>
section of <em>System Preferences</em>. Windows uses
<a href="https://support.microsoft.com/en-us/help/4028544/windows-10-turn-microsoft-defender-firewall-on-or-off" target="_blank" rel="noopener noreferrer">Defender Firewall</a>.</p><p>For each of these firewalls, set a special rule to allow UDP and TCP
traffic to pass through on port <code>1634</code>. You may want to limit this
traffic to the Ant application only.</p></li><li><p>Check your ingress&#x27; firewall.</p><p>For a datacenter hired server, this configuration will often take
place in somewhere in the web user interface. Refer to your server
hosting provider&#x27;s documentation to work out how to open ports to
the open Internet. Ensure that both TCP and UDP traffic are allowed.</p><p>Similarly, if you are connecting from within a private network, you
may find that the port is blocked by the router. Each router is
different, so consult your router&#x27;s firware documentation to make
sure there are no firewalls in place blocking traffic on your Ant&#x27;s
designated p2p port.</p><p>You may check this using netcat by trying to connect using your
computer&#x27;s public IP, as above <code>nc -zv 86.98.94.9 1634</code>.</p></li><li><p>Docker</p><p>Docker adds another level of complexity.</p><p>To debug docker connectivity issues, we may use netcat as above to
check port connections are working as expected. Double check that
you are exposing the right ports to your local network, either by
using the command line flags or in your docker-compose.yaml. You
should be able to successfully check the connection locally using
eg. <code>nc -zv localhost 1634</code> then follow instructions above to make
sure your local network has the correct ports exposed to the
Internet.</p></li><li><p>Something else entirely?</p><p>Networking is a complex topic, but it keeps us all together. If you
still can&#x27;t connect to your Ant, get in touch via <a href="http://anthive.ethsana.org/" target="_blank" rel="noopener noreferrer">The
Anthive</a> and we&#x27;ll do our best to get
you connected. In the sana, no Ant is left behind.</p></li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ethsana/sana-docs/blob/master/sidebars.js/docs/installation/connectivity.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#networking-basics" class="table-of-contents__link">Networking Basics</a></li><li><a href="#your-ip-address" class="table-of-contents__link">Your IP Address</a><ul><li><a href="#datacenters-and-computers-connected-directly-to-the-internet" class="table-of-contents__link">Datacenters and Computers Connected Directly to the Internet</a></li><li><a href="#home-commercial-and-business-networks-and-other-networks-behind-nat" class="table-of-contents__link">Home, Commercial and Business Networks and Other Networks Behind NAT</a></li><li><a href="#debugging-connectivity" class="table-of-contents__link">Debugging Connectivity</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">SNANA</div><ul class="footer__items"><li class="footer__item"><a href="https://www.ethsana.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SNAN</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/c72mpR7Erf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/ethereumsana" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://twitter.com/ethereumsana" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://ethsana.medium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ethsana" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyleft Â© 2021.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7c5259cb.js"></script>
<script src="/assets/js/main.049381c7.js"></script>
</body>
</html>